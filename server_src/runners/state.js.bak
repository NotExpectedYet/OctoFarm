// After `printer.save()` in `static async selectedFilament(printerId, filamentId, tool)`

// FileClean.generate(farmPrinters[i], systemSettings.filamentManager);
// if (printerId == 0) {
//     //Deselecting a spool
//     //Find the printer spool is attached too
//     let i = _.findIndex(farmPrinters, function(o) {
//             if(o.selectedFilament !== null && o.selectedFilament._id == filamentId){
//                 return o.selectedFilament._id;
//             }
//     });
//     if(i > -1){
//         let printer = await Printers.findById(farmPrinters[i]._id);
//         printer.selectedFilament = null;
//         farmPrinters[i].selectedFilament = null;
//         printer.save();
//         //remove from selected filament list
//         let selectedFilamentId = _.findIndex(selectedFilament, function(o) {
//             return o == filamentId;
//         });
//         if(selectedFilamentId > -1){
//             selectedFilament.splice(selectedFilamentId, 1)
//         }
//     }
// } else {
//     //Selecting a spool
//     let printer = await Printers.findById(printerId);
//     let i = _.findIndex(farmPrinters, function(o) { return o._id == printerId; });
//
//     if(farmPrinters[i].selectedFilament != null){
//         if(filamentId == 0){
//             let selectedFilamentId = _.findIndex(selectedFilament, function(o) {
//                 return o._id == farmPrinters[i].selectedFilament._id;
//             });
//             if(selectedFilamentId > -1){
//                 selectedFilament.splice(selectedFilamentId, 1)
//             }
//             printer.selectedFilament = null;
//             farmPrinters[i].selectedFilament = null;
//         }else{
//             //farm printer already has filament, remove before updating...
//             let selectedFilamentId = _.findIndex(selectedFilament, function(o) {
//                 return o._id == farmPrinters[i].selectedFilament._id;
//             });
//             if(selectedFilamentId > -1){
//                 selectedFilament.splice(selectedFilamentId, 1)
//             }
//             let spool = await Filament.findById(filamentId);
//             printer.selectedFilament = spool;
//             farmPrinters[i].selectedFilament = spool;
//             selectedFilament.push(spool._id);
//         }
//
//     }else{
//         let spool = await Filament.findById(filamentId);
//         printer.selectedFilament = spool;
//         farmPrinters[i].selectedFilament = spool;
//         selectedFilament.push(spool._id);
//     }
//     printer.markModified("selectedFilament")
//     printer.save();
// }